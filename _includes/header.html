{%- comment -%}
  Determine which section we're in based on URL
{%- endcomment -%}
{%- assign current_section = "" -%}

{%- comment -%}
  Check URL path first
{%- endcomment -%}
{%- if page.url contains "/ai" -%}
  {%- assign current_section = "ai" -%}
{%- elsif page.url contains "/github-copilot" -%}
  {%- assign current_section = "github-copilot" -%}
{%- endif -%}

<header class="site-header" role="banner">

  <div class="wrapper">
    {%- assign default_paths = site.pages | sort: "order" | map: "path" -%}
    {%- assign page_paths = site.header_pages | default: default_paths -%}

    <a class="site-title" rel="author" href="{{ "/" | relative_url }}"><svg xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 85 29" style="width: 100px; padding-top: 14px; margin-bottom: -7px">
        <path fill="currentColor" fill-rule="evenodd"
          d="M44.695 15.768H33.012c.167 2.07 1.715 3.394 4.099 3.31 1.478 0 2.774-.62 3.471-1.817h3.667c-1.227 3.21-3.792 5.028-7.027 5.028-2.175 0-3.973-.747-5.479-2.268-1.366-1.45-2.175-3.465-2.175-5.408 0-2.057.697-3.874 2.05-5.324 1.478-1.564 3.402-2.437 5.395-2.437 2.482 0 4.782 1.268 6.33 3.338.906 1.324 1.352 2.887 1.352 4.831zm-11.64-2.761h7.96c-.544-1.944-1.966-3.014-4.113-3.014-1.729 0-3.36 1.197-3.848 3.014M49.838 2.57V8.47c1.31-1.07 2.747-1.493 4.517-1.45 1.924 0 3.68.62 5.033 1.943 1.631 1.45 2.496 3.592 2.496 5.733 0 2.323-.976 4.507-2.733 6.028-1.31 1.07-2.914 1.69-4.782 1.69-1.715 0-3.178-.493-4.53-1.563v1.197h-3.347V2.569zm4.293 7.774c-2.37 0-4.168 1.888-4.168 4.409 0 2.394 1.882 4.281 3.987 4.267 2.621 0 4.42-1.901 4.42-4.338 0-2.324-1.869-4.338-4.239-4.338M67.447 2.57h-3.234v3.267h3.234zm0 4.789h-3.234v14.69h3.234zM85 22.05h-3.2479999999999998v-1.817c-.808 1.52-2.286 2.14-4.53 2.14-4.28 0-7.515-3.31-7.515-7.718 0-2.07.697-3.958 2.05-5.408 1.477-1.564 3.22-2.268 5.395-2.268 2.119 0 3.625.69 4.614 2.14V7.36h3.235zm-7.709-11.762c-2.3 0-4.168 1.817-4.168 4.211 0 2.592 1.924 4.409 4.224 4.409 2.12 0 4.043-1.944 4.043-4.211 0-2.521-1.98-4.409-4.099-4.409"
          clip-rule="evenodd"></path>
        <path fill="currentColor"
          d="M.125 28.333h8.827L18.5 18.73l9.521 9.603h8.938l-13.99-14.11L37.085 0h-8.938L18.5 9.743 8.91 0H0l14.032 14.223z">
        </path>
      </svg></a>
    <a class="site-title" href="https://github.com/features/copilot" target="_blank"><svg viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
        style="width: 50px; padding-top: 14px; margin-left: 20px; margin-bottom: -7px; margin-top: -9px">
        <path fill="currentColor" fill-rule="evenodd"
          d="M23.922 16.992c-.861 1.495-5.859 5.023-11.922 5.023-6.063 0-11.061-3.528-11.922-5.023A.641.641 0 0 1 0 16.736v-2.869a.841.841 0 0 1 .053-.22c.372-.935 1.347-2.292 2.605-2.656.167-.429.414-1.055.644-1.517a10.195 10.195 0 0 1-.052-1.086c0-1.331.282-2.499 1.132-3.368.397-.406.89-.717 1.474-.952 1.399-1.136 3.392-2.093 6.122-2.093 2.731 0 4.767.957 6.166 2.093.584.235 1.077.546 1.474.952.85.869 1.132 2.037 1.132 3.368 0 .368-.014.733-.052 1.086.23.462.477 1.088.644 1.517 1.258.364 2.233 1.721 2.605 2.656a.832.832 0 0 1 .053.22v2.869a.641.641 0 0 1-.078.256ZM12.172 11h-.344a4.323 4.323 0 0 1-.355.508C10.703 12.455 9.555 13 7.965 13c-1.725 0-2.989-.359-3.782-1.259a2.005 2.005 0 0 1-.085-.104L4 11.741v6.585c1.435.779 4.514 2.179 8 2.179 3.486 0 6.565-1.4 8-2.179v-6.585l-.098-.104s-.033.045-.085.104c-.793.9-2.057 1.259-3.782 1.259-1.59 0-2.738-.545-3.508-1.492a4.323 4.323 0 0 1-.355-.508h-.016.016Zm.641-2.935c.136 1.057.403 1.913.878 2.497.442.544 1.134.938 2.344.938 1.573 0 2.292-.337 2.657-.751.384-.435.558-1.15.558-2.361 0-1.14-.243-1.847-.705-2.319-.477-.488-1.319-.862-2.824-1.025-1.487-.161-2.192.138-2.533.529-.269.307-.437.808-.438 1.578v.021c0 .265.021.562.063.893Zm-1.626 0c.042-.331.063-.628.063-.894v-.02c-.001-.77-.169-1.271-.438-1.578-.341-.391-1.046-.69-2.533-.529-1.505.163-2.347.537-2.824 1.025-.462.472-.705 1.179-.705 2.319 0 1.211.175 1.926.558 2.361.365.414 1.084.751 2.657.751 1.21 0 1.902-.394 2.344-.938.475-.584.742-1.44.878-2.497Z">
        </path>
        <path fill="currentColor" fill-rule="evenodd"
          d="M14.5 14.25a1 1 0 0 1 1 1v2a1 1 0 0 1-2 0v-2a1 1 0 0 1 1-1Zm-5 0a1 1 0 0 1 1 1v2a1 1 0 0 1-2 0v-2a1 1 0 0 1 1-1Z">
        </path>
      </svg></a>

    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger">
        <span class="menu-icon">
          <svg viewBox="0 0 18 15" width="18px" height="15px">
            <path
              d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z" />
          </svg>
        </span>
      </label>

      <div class="trigger">
        <a class="page-link{% if page.url == '/' or page.url == '/index.html' %} active{% endif %}" href="{{ "/" | relative_url }}">Home</a>
        <a class="page-link{% if current_section == 'ai' %} active{% endif %}" href="{{ "/ai" | relative_url }}">Microsoft AI Hub</a>
        <a class="page-link{% if current_section == 'github-copilot' %} active{% endif %}" href="{{ "/github-copilot" | relative_url }}">GitHub Copilot Hub</a>
        <a class="page-link-xebia" href="https://www.xebia.com/contact" target="_blank">Contact</a>
      </div>
    </nav>
  </div>
</header>

{%- comment -%}
  Get the appropriate section pages based on current section
{%- endcomment -%}
{%- assign section_pages = "" -%}
{%- if current_section == "ai" -%}
  {%- assign section_pages = site.pages | where_exp: "item", "item.url contains '/ai/'" | sort: "order" -%}
{%- elsif current_section == "github-copilot" -%}
  {%- assign section_pages = site.pages | where_exp: "item", "item.url contains '/github-copilot/'" | sort: "order" -%}
{%- endif -%}

{%- comment -%}
  Show subnav if we have section pages OR if we're on the homepage
{%- endcomment -%}
{%- assign is_homepage = false -%}
{%- if page.url == '/' or page.url == '/index.html' -%}
  {%- assign is_homepage = true -%}
{%- endif -%}

{%- if section_pages.size > 0 or is_homepage -%}
<div class="subnav-wrapper">
  <nav class="site-subnav">
      {%- if section_pages.size > 0 -%}
        {%- for my_page in section_pages -%}
        {%- if my_page.title -%}
        {%- assign is_active = false -%}
        {%- if page.url contains my_page.url -%}
        {%- assign is_active = true -%}
        {%- endif -%}
        <a class="subpage-link{% if is_active %} active{% endif %}" href="{{ my_page.url | relative_url }}">{{
          my_page.title | escape }}</a>
        {%- endif -%}
        {%- endfor -%}
      {%- else -%}
        {%- comment -%}Empty subnav for homepage{%- endcomment -%}
      {%- endif -%}
  </nav>
</div>
{%- endif -%}

{%- comment -%}
  Include JavaScript for dynamic subnav handling
{%- endcomment -%}
<script>
{% include subnav.js %}
</script>